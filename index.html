<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="./styles.css" rel="stylesheet">
  <title>git hook</title>
</head>

<body>
  <h1>Hook git</h1>
  <h2>Husky</h2>
  <a href="https://www.youtube.com/watch?v=z413go1R55s">https://www.youtube.com/watch?v=z413go1R55s</a><br />
  <a href="https://delicious-insights.com/fr/articles/git-hooks-et-husky/">https://delicious-insights.com/fr/articles/git-hooks-et-husky/</a>
  <p>
    se concentre sur ce qui est autour du commit (avant, après, qualité...)<br />
    outils à implémenter au hook husky
    <ul>
      <li>d'analyse et formatage syntaxique du code <a href="https://github.com/okonet/lint-staged">https://github.com/okonet/lint-staged</a></li>
      <li>d'analyse des messages de commit <a href="https://commitlint.js.org/">https://commitlint.js.org/</a></li>
      <li>d'analyse du nom de branche <a href="https://github.com/JsonMa/validate-branch-name">https://github.com/JsonMa/validate-branch-name</a></li>
      <li>d'analyse des contenus commités <a href="https://github.com/mbrehin/git-precommit-checks/blob/master/README_fr.md">https://github.com/mbrehin/git-precommit-checks/blob/master/README_fr.md</a></li>
    </ul>
  </p>
  <p>
    utilise core.hooksPath qui est un élément de configuration (voir le fichier .git/config)
  </p>

  <h3>Installation Husky</h3>
  avec version node > 14<br />
  npm init -y<br />
  npm install --save-dev husky<br />
  npm set-script prepare 'husky install' (ajoute le script "prepare": "husky install" au package)<br />
  npx husky add .husky/pre-commit "echo 'Commit en cours !'" // ajout d’un hook ajouté à GIT

  <h3>Ajout de l'outil Lint-staged</h3>
  <a href="https://delicious-insights.com/fr/articles/git-hooks-et-lint-staged/">https://delicious-insights.com/fr/articles/git-hooks-et-lint-staged/</a><br>
  <a href="https://www.youtube.com/watch?v=y-ZFrkQbjSc">https://www.youtube.com/watch?v=y-ZFrkQbjSc</a><br>
  Cet outil verifie les syntaxes du code qui vient d'être ajouté sur GIT et le formate si besoin<br>
  on va coupler cet outil avec 2 autres outils : eslint et prettier.<br>

  <br>
  npm install --save-dev lint-staged<br>
  npx husky add .husky/pre-commit 'npx --no-install lint-staged'<br>
  npm install --save-dev eslint standard prettier eslint-config-prettier eslint-plugin-prettier (installation des outils spécifiés plus haut, de la convention d'Eslint "Standard JS", des passereles entre le tout)<br>
  npx eslint --init (lance un questionnaire pour définir la config d'eslint au sein du projet --> créer le fichier .eslintrc.js)<br>


  <h3>Ajout de l'outil git-precommit-checks</h3>
  <a href="https://delicious-insights.com/fr/articles/git-hooks-et-validation-de-contenus/">https://delicious-insights.com/fr/articles/git-hooks-et-validation-de-contenus/</a><br>
  <a href="https://www.youtube.com/watch?v=OiJU_RFxCuo">https://www.youtube.com/watch?v=OiJU_RFxCuo</a><br>
  npm install --save-dev git-precommit-checks<br>

  <p>
    définit des règles d’analyse pour remonter un warning ou une erreur sur le code qui vient d’être ajouté ou modifié. il peut bloque le commit
  </p>
  créer le fichier git-precommit-checks.config.js qui contient les règles<br>
  npx husky add .husky/pre-commit 'npx --no-install git-precommit-checks'<br>
  
  <h3>Améliorez les messages de commits avec commitlint et commitizen</h3>
  <a href="https://delicious-insights.com/fr/articles/git-hooks-et-commitlint/">https://delicious-insights.com/fr/articles/git-hooks-et-commitlint/</a><br>
  <a href="https://www.youtube.com/watch?v=w_LRr_sVrz4">https://www.youtube.com/watch?v=w_LRr_sVrz4</a><br>

  <p>Linter les messages commit en se réfèrant à une convention, soit existante (Commits Conventionnels) soit créée dans la société.</p>
  npm install --save-dev @commitlint/cli @commitlint/config-conventional<br>
  
  créer le fichier commitlint.config.js qui renseigne la lib config-conventional suivi pour l'analyse<br>

  <p>
    commizen <br>
    outillage pour accompagner la saisie de message
  </p>
  npm install --save-dev commitizen @commitlint/cz-commitlint<br>
  commitizen n'a pas de fichier config, il faut mettre les infos dans package.json<br>
   
</body>

</html>